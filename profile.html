<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Ghana Salon Booking</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Header -->
    <header class="header modern-header">
        <div class="container">
            <div class="logo">
                <span class="logo-icon">üá¨üá≠</span>
                <h1>Ghana Salon Booking</h1>
            </div>
            <nav class="nav-menu">
                <a href="index.html" class="nav-link" data-i18n="navhome">Home</a>
                <a href="profile.html" class="nav-link active" data-i18n="navprofile">My Profile</a>
                <a href="admin.html" class="nav-link admin-link" data-i18n="navadmin">Admin</a>
                <select id="languageSelector" class="language-selector">
                    <option value="en">üá¨üáß English</option>
                    <option value="tw">Twi</option>
                    <option value="ga">Ga</option>
                    <option value="ee">Ewe</option>
                </select>
            </nav>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Login Prompt Section -->
    <section class="profile-section modern-profile-section" id="loginPrompt">
        <div class="container">
            <div class="login-card modern-login-card">
                <div class="login-header">
                    <div class="login-icon">üë§</div>
                    <h2 data-i18n="profilelogin">Access Your Profile</h2>
                    <p data-i18n="profilelogindesc">Enter your phone number to view bookings and rewards</p>
                </div>
                <form id="profileLoginForm" class="modern-form">
                    <div class="form-group">
                        <label for="loginPhone" data-i18n="phonenumber">Phone Number</label>
                        <input type="tel" id="loginPhone" required class="modern-input" placeholder="0241234567">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block" data-i18n="login">
                        <span>Login</span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </form>
                <div class="login-footer">
                    <p>New here? <a href="booking.html">Make your first booking</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Dashboard Section -->
    <section class="profile-section modern-profile-section" id="profileDashboard" style="display: none;">
        <div class="container">

            <!-- Profile Header -->
            <div class="profile-header modern-profile-header">
                <div class="profile-info-section">
                    <div class="profile-avatar" id="profileInitials">GH</div>
                    <div class="profile-details">
                        <h2 id="profileName">Customer</h2>
                        <p id="profilePhone" class="profile-phone"></p>
                        <span class="profile-badge">‚≠ê Gold Member</span>
                    </div>
                </div>
                <button onclick="logoutProfile()" class="btn btn-secondary btn-small" data-i18n="logout">Logout</button>
            </div>

            <!-- Loyalty Card -->
            <div class="loyalty-card modern-loyalty-card">
                <div class="loyalty-header">
                    <h3 data-i18n="loyaltypoints">üéÅ Loyalty Rewards</h3>
                    <div class="points-display">
                        <span class="points-number" id="totalPoints">0</span>
                        <span class="points-label" data-i18n="points">points</span>
                    </div>
                </div>
                <div class="loyalty-progress-bar">
                    <div class="progress-fill" id="loyaltyProgress" style="width: 0%"></div>
                </div>
                <p class="loyalty-text">
                    <strong><span id="pointsToReward">100</span></strong> <span data-i18n="pointstoreward">points to next reward</span> üéâ
                </p>
                <div class="rewards-tiers">
                    <div class="tier bronze">
                        <span class="tier-icon">ü•â</span>
                        <span>Bronze</span>
                        <small>0-99 pts</small>
                    </div>
                    <div class="tier silver">
                        <span class="tier-icon">ü•à</span>
                        <span>Silver</span>
                        <small>100-299 pts</small>
                    </div>
                    <div class="tier gold">
                        <span class="tier-icon">ü•á</span>
                        <span>Gold</span>
                        <small>300+ pts</small>
                    </div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="profile-stats-grid">
                <div class="profile-stat-card">
                    <div class="stat-icon">üìÖ</div>
                    <div class="stat-content">
                        <h4 data-i18n="totalbookings">Total Bookings</h4>
                        <p class="stat-value" id="totalBookingsCount">0</p>
                    </div>
                </div>
                <div class="profile-stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-content">
                        <h4 data-i18n="totalspent">Total Spent</h4>
                        <p class="stat-value" id="totalSpent">GHS 0</p>
                    </div>
                </div>
                <div class="profile-stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-content">
                        <h4 data-i18n="favoriteservice">Favorite Service</h4>
                        <p class="stat-value" id="favoriteService">-</p>
                    </div>
                </div>
            </div>

            <!-- Booking History -->
            <div class="booking-history-section">
                <div class="section-header-inline">
                    <h3 data-i18n="bookinghistory">üìã Booking History</h3>
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterHistory('all')" data-i18n="all">All</button>
                        <button class="filter-btn" onclick="filterHistory('upcoming')" data-i18n="upcoming">Upcoming</button>
                        <button class="filter-btn" onclick="filterHistory('past')" data-i18n="past">Past</button>
                    </div>
                </div>
                <div id="historyList" class="history-list">
                    <div class="empty-state">
                        <span class="empty-icon">üìÖ</span>
                        <p data-i18n="nobookings">No bookings yet</p>
                        <a href="booking.html" class="btn btn-primary">Make a Booking</a>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Footer -->
    <footer class="footer modern-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>üá¨üá≠ Ghana Salon Booking</h3>
                    <p>Connecting Ghana's best stylists with clients nationwide.</p>
                </div>
                <div class="footer-links">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <a href="index.html">Home</a>
                        <a href="profile.html">My Profile</a>
                        <a href="booking.html">Book Now</a>
                    </div>
                    <div class="footer-col">
                        <h4>Support</h4>
                        <a href="#">Help Center</a>
                        <a href="#">Contact Us</a>
                        <a href="#">Privacy Policy</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Ghana Salon Booking. <span data-i18n="footerrights">All rights reserved.</span></p>
                <p class="made-in-ghana">Made with ‚ù§Ô∏è in Ghana</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="database-manager.js"></script>
    <script src="translations.js"></script>
    <script src="enhanced-script.js"></script>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            document.querySelector('.nav-menu').classList.toggle('active');
        }

        // Update loyalty progress visualization
        function updateLoyaltyProgress(points) {
            const tier1 = 100;
            const tier2 = 300;
            let percentage = 0;

            if (points < tier1) {
                percentage = (points / tier1) * 33.33;
            } else if (points < tier2) {
                percentage = 33.33 + ((points - tier1) / (tier2 - tier1)) * 33.33;
            } else {
                percentage = 100;
            }

            document.getElementById('loyaltyProgress').style.width = percentage + '%';

            // Update tier badges
            document.querySelectorAll('.tier').forEach(tier => {
                tier.classList.remove('active');
            });

            if (points >= tier2) {
                document.querySelector('.tier.gold').classList.add('active');
            } else if (points >= tier1) {
                document.querySelector('.tier.silver').classList.add('active');
            } else {
                document.querySelector('.tier.bronze').classList.add('active');
            }
        }
    </script>
</body>
</html>